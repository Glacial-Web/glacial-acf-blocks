"use strict";var defaultOptions={container:null,filters:null,hideTexts:null,textPosition:"top",linesOrientation:"horizontal",rotate:0,arrayBackgroundColorText:null,arrayColorText:null,linesColor:null},Dics=function(t){this.options=utils.extend({},[defaultOptions,t],{clearEmpty:!0}),this.container=this.options.container,null==this.container?console.error("Container element not found!"):(this._setOrientation(this.options.linesOrientation,this.container),this.images=this._getImages(),this.sliders=[],this._activeSlider=null,this._load(this.images[0]))};Dics.prototype._load=function(t){var i=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e5;t.naturalWidth?this._buidAfterFirstImageLoad(t):0<e?(e--,setTimeout(function(){i._load(t,e)},100)):console.error("error loading images")},Dics.prototype._buidAfterFirstImageLoad=function(t){this._setContainerWidth(t),this._build(),this._setEvents()},Dics.prototype._setContainerWidth=function(t){this.options.container.style.height="".concat(this._calcContainerHeight(t),"px")},Dics.prototype._setOpacityContainerForLoading=function(t){this.options.container.style.opacity=t},Dics.prototype._build=function(){var t=this;t._applyGlobalClass(t.options);for(var i=t.images.length,e=t.container.getBoundingClientRect()[t.config.sizeField]/i,o=0;o<i;o++){var n=t.images[o],s=t._createElement("div","b-dics__section"),r=t._createElement("div","b-dics__image-container"),c=t._createSlider(o,e);t._createAltText(n,o,r),t._applyFilter(n,o,t.options.filters),t._rotate(n,r),s.setAttribute("data-function","b-dics__section"),s.style.flex="0 0 ".concat(e,"px"),n.classList.add("b-dics__image"),s.appendChild(r),r.appendChild(n),o<i-1&&s.appendChild(c),t.container.appendChild(s),n.style[this.config.positionField]="".concat(o*-e,"px")}this.sections=this._getSections(),this._setOpacityContainerForLoading(1)},Dics.prototype._getImages=function(){return this.container.querySelectorAll("img")},Dics.prototype._getSections=function(){return this.container.querySelectorAll('[data-function="b-dics__section"]')},Dics.prototype._createElement=function(t,i){t=document.createElement(t);return t.classList.add(i),t},Dics.prototype._setEvents=function(){var r=this;r._disableImageDrag(),r._isGoingRight=null;function c(t){var i=t.pageX||t.touches[0].pageX;i<e?r._isGoingRight=!1:e<i&&(r._isGoingRight=!0),e=i,i=r._calcPosition(t),t=i-r._beforeSectionsWidth(r.sections,r.images,r._activeSlider),r.sliders[r._activeSlider].style[r.config.positionField]="".concat(i,"px"),r._pushSections(t,i)}var e=0;r.container.addEventListener("click",c);for(var t=0;t<r.sliders.length;t++)!function(i){var e=r.sliders[i];utils.setMultiEvents(e,["mousedown","touchstart"],function(t){r._activeSlider=i,r._clickPosition=r._calcPosition(t),e.classList.add("b-dics__slider--active"),utils.setMultiEvents(r.container,["mousemove","touchmove"],c)})}(t);utils.setMultiEvents(document.body,["mouseup","touchend"],function(){var t=r.container.querySelectorAll(".b-dics__slider--active"),i=!0,e=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(i=(n=s.next()).done);i=!0)n.value.classList.remove("b-dics__slider--active"),utils.removeMultiEvents(r.container,["mousemove","touchmove"],c)}catch(t){e=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(e)throw o}}})},Dics.prototype._beforeSectionsWidth=function(t,i,e){for(var o=0,n=0;n<t.length;n++){var s=t[n];if(n===e)return o;o+=s.getBoundingClientRect()[this.config.sizeField]}},Dics.prototype._calcContainerHeight=function(t){var i=t.naturalHeight,t=t.naturalWidth;return this.options.container.getBoundingClientRect().width/t*i},Dics.prototype._setLeftToImages=function(t,i){for(var e=0,o=0;o<i.length;o++)i[o].style[this.config.positionField]="-".concat(e,"px"),e+=t[o].getBoundingClientRect()[this.config.sizeField],this.sliders[o].style[this.config.positionField]="".concat(e,"px")},Dics.prototype._disableImageDrag=function(){for(var t=0;t<this.images.length;t++)this.sliders[t].addEventListener("dragstart",function(t){t.preventDefault()}),this.images[t].addEventListener("dragstart",function(t){t.preventDefault()})},Dics.prototype._applyFilter=function(t,i,e){e&&(t.style.filter=e[i])},Dics.prototype._applyGlobalClass=function(t){var i=t.container;t.hideTexts&&i.classList.add("b-dics--hide-texts"),"vertical"===t.linesOrientation&&i.classList.add("b-dics--vertical"),"center"===t.textPosition?i.classList.add("b-dics--tp-center"):"bottom"===t.textPosition?i.classList.add("b-dics--tp-bottom"):"left"===t.textPosition?i.classList.add("b-dics--tp-left"):"right"===t.textPosition&&i.classList.add("b-dics--tp-right")},Dics.prototype._createSlider=function(t,i){var e=this._createElement("div","b-dics__slider");return this.options.linesColor&&(e.style.color=this.options.linesColor),e.style[this.config.positionField]="".concat(i*(t+1),"px"),this.sliders.push(e),e},Dics.prototype._createAltText=function(t,i,e){var o=t.getAttribute("alt");o&&(t=this._createElement("p","b-dics__text"),this.options.arrayBackgroundColorText&&(t.style.backgroundColor=this.options.arrayBackgroundColorText[i]),this.options.arrayColorText&&(t.style.color=this.options.arrayColorText[i]),t.appendChild(document.createTextNode(o)),e.appendChild(t))},Dics.prototype._rotate=function(t,i){t.style.rotate="-".concat(this.options.rotate),i.style.rotate=this.options.rotate},Dics.prototype._removeActiveElements=function(){var t=Dics.container.querySelectorAll(".b-dics__slider--active"),i=!0,e=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(i=(n=s.next()).done);i=!0)n.value.classList.remove("b-dics__slider--active"),utils.removeMultiEvents(Dics.container,["mousemove","touchmove"],Dics.prototype._removeActiveElements)}catch(t){e=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(e)throw o}}},Dics.prototype._setOrientation=function(t){this.config={},"vertical"===t?(this.config.offsetSizeField="offsetHeight",this.config.offsetPositionField="offsetTop",this.config.sizeField="height",this.config.positionField="top",this.config.clientField="clientY",this.config.pageField="pageY"):(this.config.offsetSizeField="offsetWidth",this.config.offsetPositionField="offsetLeft",this.config.sizeField="width",this.config.positionField="left",this.config.clientField="clientX",this.config.pageField="pageX")},Dics.prototype._calcPosition=function(t){var i=this.container.getBoundingClientRect(),t=(isNaN(t[this.config.clientField])?t.touches[0]:t)[this.config.clientField];return i[this.config.positionField]<t?t-i[this.config.positionField]:0},Dics.prototype._pushSections=function(t,i){this._setFlex(i,this._isGoingRight);var e=this.sections[this._activeSlider],o=this.sections[this._activeSlider+1],i=o.getBoundingClientRect()[this.config.sizeField]-(t-this.sections[this._activeSlider].getBoundingClientRect()[this.config.sizeField]);e.style.flex=(!0===this._isGoingRight?"2 0 ":"1 1 ").concat(t,"px"),o.style.flex=(!0===this._isGoingRight?" ":"2 0 ").concat(i,"px"),this._setLeftToImages(this.sections,this.images)},Dics.prototype._setFlex=function(t,i){for(var e=0,o=0;o<this.sections.length;o++){var n=this.sections[o],s=n.getBoundingClientRect()[this.config.sizeField];e+=s,i&&e-s<t&&o>this._activeSlider||!i&&t<e&&o<this._activeSlider?n.style.flex="1 100 ".concat(s,"px"):n.style.flex="0 0 ".concat(s,"px")}};var utils={extend:function(t,i,s){for(var e in i)i.hasOwnProperty(e)&&!function t(i,e){for(var o in e){var n;e.hasOwnProperty(o)&&(n=e[o],"Object"===utils.getConstructor(n)?(i[o]||(i[o]={}),t(i[o],n)):s.clearEmpty&&null==n||(i[o]=n))}}(t,i[e]);return t},setMultiEvents:function(t,i,e){for(var o=0;o<i.length;o++)t.addEventListener(i[o],e)},removeMultiEvents:function(t,i,e){for(var o=0;o<i.length;o++)t.removeEventListener(i[o],e,!1)},getConstructor:function(t){return Object.prototype.toString.call(t).slice(8,-1)}};